<!DOCTYPE html>
<html lang="en">
<link href="codemirror/lib/codemirror.css" rel="stylesheet" type="text/css">
<link href="codemirror/theme/monokai.css" rel="stylesheet" type="text/css">
<link href="codemirror/addon/display/fullscreen.css" rel="stylesheet" type="text/css">

<script type="text/javascript" src="codemirror/lib/codemirror.js"></script>

<script type="text/javascript" src="codemirror/mode/properties/properties.js"></script>
<script type="text/javascript" src="codemirror/mode/lua/lua.js"></script>

<script type="text/javascript" src="codemirror/addon/selection/active-line.js"></script>
<script type="text/javascript" src="codemirror/addon/edit/matchbrackets.js"></script>
<script type="text/javascript" src="codemirror/addon/display/fullscreen.js"></script>

<script type="text/javascript" src="example.js"></script>

<head>
  <meta charset="UTF-8">
  <title>Title</title>
</head>
<body>

<style type="text/css">
  body {font-family: Arial,Helvetica;}
</style>

<h3>Model Editor:</h3>

See other examples:
<select id="example-switch">
  <option value="basic">ACL</option>
  <option value="basic_with_root">ACL with superuser</option>
  <option value="basic_without_resources">ACL without resources</option>
  <option value="basic_without_users">ACL without users</option>
  <option value="rbac">RBAC</option>
  <option value="rbac_with_resource_roles">RBAC with resource roles</option>
  <option value="rbac_with_domains">RBAC with domains/tenants</option>
  <option value="rbac_with_deny">RBAC with deny-override</option>
  <option value="abac">ABAC</option>
  <option value="keymatch">RESTful (KeyMatch)</option>
  <option value="keymatch2">RESTful (KeyMatch2)</option>
  <option value="ipmatch">IP match</option>
  <option value="priority">Priority</option>
</select>

<p>
<form action="" method="post">
  <textarea id="model" name="model">
[request_definition]
r = sub, obj, act

[policy_definition]
p = sub, obj, act

[policy_effect]
e = some(where (p.eft == allow))

[matchers]
m = r.sub == p.sub && r.obj == p.obj && r.act == p.act</textarea>
</form>
</p>

<h3>Policy Editor:</h3>

<p>
<form action="" method="post">
  <textarea id="policy" name="policy">
p, alice, data1, read
p, bob, data2, write</textarea>
</form>
</p>

</body>
</html>

<script>
  var editor_model = CodeMirror.fromTextArea(document.getElementById("model"), {
    lineNumbers: true,
    indentUnit: 4,
    styleActiveLine: true,
    matchBrackets: true,
    mode: 'properties',
    lineWrapping: true,
    theme: 'monokai',
  });

  var editor_policy = CodeMirror.fromTextArea(document.getElementById("policy"), {
    lineNumbers: true,
    indentUnit: 4,
    styleActiveLine: true,
    matchBrackets: true,
    mode: 'lua',
    lineWrapping: true,
    theme: 'monokai',
  });

  document.getElementById("example-switch").addEventListener("change",function() {
    editor_model.setValue(model_data[this.value]);
    editor_policy.setValue(policy_data[this.value]);
  });
</script>
